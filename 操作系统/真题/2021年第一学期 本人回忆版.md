## 2021 计科 大三上学期操作系统期末试题 计算机学院（详细版，附部分解答）

* 简答题（4个，一个10分）

  * 1.进程与线程
    * xxxx段可以共享，栈段不能共享，原因
    * 举例什么能导致进程由运行态 => 就绪态
  * 2.核心IO子系统、设备驱动程序、中断处理程序分别有什么功能？他们有什么关系？
  * 3.死锁
    * 解释死锁概念
    * 死锁处理措施
    * 现代操作系统一般怎么处理死锁
  * 4.文件的磁盘块分配算法
    * 分配方式有哪些（实际上就是索引、连续、链接）
    * 这些分配方式应用于实际操作系统时有什么改进？改进有什么意义？

* 计算题（35分，15+10+10）

  * 5.给一个场景（）
    * 这是发生了什么问题？（其实是抖动）
    * 给出解决这个问题的两个方法，并说出他们相应的思想。（工作集、驻留集）
  * 6.进程调度（优先级调度） 
    * 画甘特图，计算平均等待时间
    * 优先级调度算法有什么问题？怎么改进？（饥饿）
  * 7.两级页表（考研原题）10分
    * 给虚拟地址，计算页/页框大小
    * 求一级页表和二级页表共占了多少页
    * 给你两个16进制虚拟地址，问你访问这两个地址的过程中访问了多少个二级页表？（1个）

* 算法编程题（25分，10+15）

  * 8.银行顾客座位(银行提供1个访问窗口和10个顾客等待座位。顾客到达银行时，若有空座位，则到取号机领取一个号，坐在座位上等待叫号。取号机每次仅允许一个顾客使用。当营业员空闲时，通过叫号选取一位顾客，并为其服务。顾客和营业员的活动过程描述如下)

    * 设置相应的信号量并初始化，并解释信号量的含义，并通过PV操作（或wait/signal操作）写出整个流程

  * 9.用linux设计一个类似的shell程序。有三个命令，分别说明命令的含义及实现思路，并给出核心代码的C语言实现

    * ./a.out&（父进程即shell不wait这个子进程 => 就是装入这条命令的子进程 了，而是由管理进程来wait）

      * ```c
        if(pid == 0) {
          // 子进程
          execlp(a.out, ...);
        } else {
          // 父进程 shell
          printf("命令提示符\n");
        }
        ```

    * ./a.out > t.txt（标准输出重定向，把a.out的标准输出重定向到t.txt中）

      * ```c
        if(pid == 0) {
          // 子进程在装入新的进程前要完成重定向
          close(1);
          open(t.txt, CREATE | WRITE);
          execlp(a.out, ...);
        } else {
          waitpid(pid);
          printf("命令提示符\n");
        }
        ```

    * ./a.out | b.out | c.out（多级管道，a的输出传到b的输入，b的输出传到c的输入。abc之间是拓扑同步的，通过管道来传递数据，其实也是重定向标准输入输出来实现的，对a来说重定向了输出，对b重定向了输入和输出，对c重定向了输入)

      * ```c
        int pipeAtoB[2] = pipe();
        int pipeBtoC[2] = pipe();
        // 下面以创建a和b间的管道为例
        pid_t pidA = fork();
        if(pidA == 0) {
          // a进程
          // pipeAtoB[0]为读，pipeAtoB[1]为写
          close(pipeAtoB[0]);
          execlp(a.out, ...);
        } else {
          // 父进程
          pid_t pidB = fork();
          if(pidB == 0) {
            // b进程
            close(pipeAtoB[1]);
            close(pipeBtoC[0]);
            execlp()
          }  
        }
        
        ```

        

